


class ContextManager:
    def __enter__(self):
        print('Вызов метода __enter__()')
        return self
    
    def __exit__(self, exc_type, exc_value, traceback):
        print('Вызов метода __exit__()')

    def __str__(self):
        return 'ContextManager'


with ContextManager() as cm:
    print(cm)

class ContextManager:
    def __enter__(self):
        print('Вызов метода __enter__()')
        raise ValueError
    
    def __exit__(self, exc_type, exc_value, traceback):
        print('Вызов метода __exit__()')


try:
    with ContextManager():
        print('Выполнение блока with')
except ValueError:
    print('Исключение обработано')






